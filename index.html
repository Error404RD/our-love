<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro Amor ❤️</title>

    <style>
        body{
            margin:0;
            overflow:hidden;
            font-family:'Segoe UI', sans-serif;
            background:linear-gradient(to top,#f8d7da,#fcefee 50%,#ffffff);
        }

        .container{
            position:relative;
            width:100%;
            height:100vh;
        }

        .text-box{
            position:absolute;
            top:18%;
            left:8%;
            max-width:420px;
            color:#4a2a18;
        }

        .text-box h1{
            font-size:clamp(24px, 4vw, 38px);
            margin:0 0 15px;
            font-weight:600;
        }

        .text-box p{
            font-size:clamp(14px, 2vw, 18px);
            line-height:1.6;
            opacity:0.85;
        }

        .counter{
            margin-top:20px;
            font-size:clamp(14px, 2vw, 20px);
            font-weight:500;
            color:#a83e62;
        }

        svg{
            position:absolute;
            bottom:0;
            right:0;
            width:clamp(300px, 50vw, 700px);
            height:100vh;
        }

        .branch{
            stroke:#4a2a18;
            stroke-linecap:round;
            fill:none;
            stroke-dasharray:2000;
            stroke-dashoffset:2000;
            animation:grow 3s ease forwards;
        }

        @keyframes grow{
            to{stroke-dashoffset:0;}
        }

        @keyframes bloom{
            0%{opacity:0; transform:scale(0);}
            100%{opacity:1; transform:scale(1);}
        }

        @media (max-width:768px){
            .text-box{
                top:8%;
                left:50%;
                transform:translateX(-50%);
                text-align:center;
                max-width:90%;
            }

            svg{
                right:50%;
                transform:translateX(50%);
                width:90vw;
                height:70vh;
            }
        }
    </style>
</head>

<body>

<div class="container">

    <div class="text-box">
        <h1>Para el amor de mi vida ❤️</h1>
        <p>
            Como este árbol, nuestro amor crece cada día,
            floreciendo en millones de pequeños latidos
            que forman un solo corazón.
        </p>
        <div class="counter">
            Juntos desde hace: <span id="time"></span>
        </div>
    </div>

    <svg id="tree" viewBox="0 0 800 1000" preserveAspectRatio="xMidYMax meet">

        <!-- Tronco -->
        <path class="branch" stroke-width="18"
              d="M400 1000 C380 830 420 700 400 580"/>

        <!-- Ramas principales -->
        <path class="branch" stroke-width="6" style="animation-delay:1s"
              d="M400 650 C300 580 240 520 210 460"/>

        <path class="branch" stroke-width="6" style="animation-delay:1.2s"
              d="M400 650 C500 580 560 520 590 460"/>

        <path class="branch" stroke-width="4" style="animation-delay:1.4s"
              d="M400 610 C330 560 300 520 270 480"/>

        <path class="branch" stroke-width="4" style="animation-delay:1.6s"
              d="M400 610 C470 560 500 520 530 480"/>
    </svg>

</div>

<script>

    const startDate = new Date("2025-09-24T00:00:00");

    const colors = [
        "#ff0000",
        "#ff1744",
        "#ff4d6d",
        "#ff6699",
        "#ff3366"
    ];

    function updateCounter(){
        const now = new Date();
        const diff = now - startDate;

        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        document.getElementById("time").innerHTML =
            `${days} días ${hours}h ${minutes}m ${seconds}s ❤️`;
    }

    setInterval(updateCounter,1000);
    updateCounter();

    const svg = document.getElementById("tree");

    function insideHeart(x,y){
        return Math.pow(x*x+y*y-1,3)-x*x*y*y*y <= 0;
    }

    let heartPositions=[];

    setTimeout(()=>{

        let points=[];

        for(let i=0;i<3000;i++){
            let x,y;
            do{
                x=(Math.random()*2-1)*1.3;
                y=(Math.random()*2-1)*1.3;
            }while(!insideHeart(x,y));
            points.push({x,y});
        }

        points.sort((a,b)=>a.y-b.y);

        points.forEach((p,i)=>{

            const posX = 400 + p.x*200;
            const posY = 520 - p.y*200;  // corazón más abajo

            heartPositions.push({x:posX,y:posY});

            const heart = document.createElementNS("http://www.w3.org/2000/svg","text");
            heart.textContent="❤";
            heart.setAttribute("x",posX);
            heart.setAttribute("y",posY);
            heart.setAttribute("font-size", Math.random()*14+14);
            heart.setAttribute("fill", colors[Math.floor(Math.random()*colors.length)]);
            heart.setAttribute("text-anchor","middle");
            heart.setAttribute("dominant-baseline","middle");
            heart.style.opacity="0";
            heart.style.animation="bloom 0.4s ease forwards";
            heart.style.animationDelay=(i*0.002)+"s";
            svg.appendChild(heart);

        });

    },3000);


    function createFallingHeart(){

        if(heartPositions.length===0) return;

        const random=heartPositions[Math.floor(Math.random()*heartPositions.length)];

        const heart=document.createElementNS("http://www.w3.org/2000/svg","text");
        heart.textContent="❤";
        heart.setAttribute("x",random.x);
        heart.setAttribute("y",random.y);
        heart.setAttribute("font-size",12+Math.random()*10);
        heart.setAttribute("fill", colors[Math.floor(Math.random()*colors.length)]);
        heart.setAttribute("text-anchor","middle");
        heart.setAttribute("dominant-baseline","middle");

        svg.appendChild(heart);

        let start=null;
        const duration=5000;
        const drift=(Math.random()-0.5)*120;

        function animate(t){
            if(!start) start=t;
            const progress=t-start;
            const percent=progress/duration;

            if(percent<1){
                heart.setAttribute("y", random.y + percent*600);
                heart.setAttribute("x", random.x + drift*percent);
                heart.style.opacity=1-percent;
                requestAnimationFrame(animate);
            }else{
                svg.removeChild(heart);
            }
        }

        requestAnimationFrame(animate);
    }

    setInterval(createFallingHeart,500);

</script>

</body>
</html>
